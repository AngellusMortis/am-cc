local a=require("cc.expect")local b=require("cc.pretty")require(settings.get("ghu.base").."core/apis/ghu")local c=require("am.log")local d=require("am.core")local e=require("am.pathfind")local function f(g)local h=arg[0]or fs.getName(shell.getRunningProgram())local i=" <action> [args] ..."local j=false;if g=="pos"then i=" pos"elseif g=="nodes"then i=" nodes <isReturn>"elseif g=="save"then i=" save <isReturn>"elseif g=="reset"then i=" reset"elseif g=="turn"then i=" turn <left|right>"elseif g=="turnTo"then i=" turnTo <dir>"elseif g=="go"then i=" go <count>"elseif g=="goUp"then i=" goUp <count>"elseif g=="goTo"then i=" goTo <origin|return|node|returnNode>"elseif g=="goToPos"then i=" goToPos [x] [z] [y] [dir]"else j=true end;print("Usage: "..h..i)if j then print("Actions:")print("pos, nodes, save, reset, turn, turnTo, go, goUp, goTo, goToPos")end end;local function k(g,l,m,n,o)g=string.lower(g)if g=="pos"then c.debug("pf pos")c.info(e.s.position.get())elseif g=="nodes"or g=="save"then local p=d.strBool(l)a.expect(2,p,"boolean")c.debug(string.format("pf %s %s",g,p))if g=="save"then c.info(e.addNode(p))return end;if p then c.info(e.s.returnnodes.get())else c.info(e.s.nodes.get())end elseif g=="reset"then c.debug("pf reset")e.resetPosition()elseif g=="go"or g=="goup"then if l==nil then l=1 end;local q=tonumber(l)local r;c.debug(string.format("pf %s %d",g,q))if g=="go"then r=e.goHorizontal(q)else r=e.goVertical(q)end;c.info(r)elseif g=="turnto"then if l==nil then l="front"end;string.lower(l)c.debug(string.format("pf turnTo %d",l))local s=e.dirFromString(l,e.c.DirType.Turn)c.info(e.turnTo(s))elseif g=="turn"then l=string.lower(l)if l=="left"then c.debug("pf turn left")c.info(e.turnLeft())elseif m=="right"then c.debug("pf turn right")c.info(e.turnRight())else f(g)end elseif g=="goto"then l=string.lower(l)if l=="origin"then c.debug("pf goto origin")c.info(e.goToOrigin())elseif l=="return"then c.debug("pf goto return")c.info(e.goToReturn())elseif l=="node"then c.debug("pf goto node")c.info({e.goToPreviousNode(false)})elseif l=="returnnode"then c.debug("pf goto returnnode")c.info({e.goToPreviousNode(true)})else f(g)end elseif g=="gotopos"then if l==nil then l=0 end;if m==nil then m=0 end;if n==nil then n=0 end;local t=tonumber(l)local u=tonumber(m)local v=tonumber(n)local s=e.dirFromString(o)c.debug(string.format("pf gotopos %d %d %d %s",t,u,v,s))c.info(e.goTo(t,u,v,s))else f(g)end end;k(arg[1],arg[2],arg[3],arg[4],arg[5])
