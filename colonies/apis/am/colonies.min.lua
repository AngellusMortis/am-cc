require(settings.get("ghu.base").."core/apis/ghu")local a=require("am.core")local b=require("am.event")local c={}local d={}d.mods={name="colonies.blacklistedMods",default={["minecraft"]=true,["domum_ornamentum"]=true,["minecolonies"]=true},type="table"}d.maxStacks={name="colonies.maxStacks",default=4,type="number"}c.s=a.makeSettingWrapper(d)local e=nil;local function f()if e==nil then e=peripheral.find("colonyIntegrator")if e==nil then error("Could not find Colony Integrator")end end;return e end;local function g()if colony==nil or not colony.isValid()then error("Could not find colony info")end;local h=f()local i=colony.getInfo()if not i.active then error("Colony is not active")end;i.graves=h.amountOfGraves()i.constructionCount=h.amountOfConstructionSites()i.players=colony.getPlayers().players;i.requests=colony.getRequests()local j=colony.getBuildings()i.buildings={}i.tavernCount=0;for k,l in ipairs(j)do if l.type=="tavern"and l.level>0 then i.tavernCount=i.tavernCount+1 end;if l.type~="postbox"and l.type~="stash"then i.buildings[#i.buildings+1]=l end end;local m=colony.getVisitors()i.visitorCount=#m;i.visitors={}for k,n in ipairs(m)do i.visitors[n.id]=n end;local o=h.getCitizens()i.citizenCount=#o;i.citizens={}for k,p in ipairs(o)do i.citizens[p.id]=p end;b.ColonyStatusPollEvent(i):send()return i end;c.pollColony=g;return c
