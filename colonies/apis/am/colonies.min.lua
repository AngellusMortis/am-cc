require(settings.get("ghu.base").."core/apis/ghu")local a=require("am.core")local b=require("am.event")local c={}local d={}d.mods={name="colonies.blacklistedMods",default={["minecraft"]=true,["domum_ornamentum"]=true,["minecolonies"]=true},type="table"}d.maxStacks={name="colonies.maxStacks",default=4,type="number"}c.s=a.makeSettingWrapper(d)local e=nil;local function f()if e==nil then e=peripheral.find("colonyIntegrator")if e==nil then error("Could not find Colony Integrator")end end;return e end;local function g()if colony==nil or not colony.isValid()then error("Could not find colony info")end;local h=f()local i=colony.getInfo()if not i.active then error("Colony is not active")end;i.graves=h.amountOfGraves()i.constructionCount=h.amountOfConstructionSites()i.players=colony.getPlayers().players;i.requests=colony.getRequests()i.buildings=colony.getBuildings()i.tavernCount=0;for j,k in ipairs(i.buildings)do if k.type=="tavern"and k.level>0 then i.tavernCount=i.tavernCount+1;break end end;local l=colony.getVisitors()i.visitorCount=#l;i.visitors={}for j,m in ipairs(l)do i.visitors[m.id]=m end;local n=h.getCitizens()i.citizenCount=#n;i.citizens={}for j,o in ipairs(n)do i.citizens[o.id]=o end;b.ColonyStatusPollEvent(i):send()return i end;c.pollColony=g;return c
