require(settings.get("ghu.base").."core/apis/ghu")local a=require("am.core")local b=require("am.event")local c={}local d={}d.mods={name="colonies.blacklistedMods",default={["minecraft"]=true,["domum_ornamentum"]=true,["minecolonies"]=true},type="table"}d.maxStacks={name="colonies.maxStacks",default=4,type="number"}c.s=a.makeSettingWrapper(d)local e=nil;local function f()if e==nil then e=peripheral.find("colonyIntegrator")if e==nil then error("Could not find Colony Integrator")end end;return e end;local function g()if colony==nil or not colony.isValid()then error("Could not find colony info")end;local h=f()local i=colony.getInfo()if not i.active then error("Colony is not active")end;i.graves=h.amountOfGraves()i.constructionCount=h.amountOfConstructionSites()i.players=colony.getPlayers().players;i.requests=colony.getRequests()i.buildings=colony.getBuildings()local j=colony.getVisitors()i.visitorCount=#j;i.visitors={}for k,l in ipairs(j)do i.visitors[l.id]=l end;local m=h.getCitizens()i.citizenCount=#m;i.citizens={}for k,n in ipairs(m)do i.citizens[n.id]=n end;b.ColonyStatusPollEvent(i):send()return i end;c.pollColony=g;return c
